
@{
    Layout = "~/Views/Shared/_LayoutSuperAdmin.cshtml";
}

<div id="mainWrap" class="main_wrap">

    <div class="total_all">

        <div class="agent_path">
            <ul id="agentPath" class="agent_path-L" style="display: none;">

                <li id="path6" class="" style="display: none;">
                    <a href="javascript: void(0);">
                        <span class="lv_0">
                            COM
                        </span>
                        <strong></strong>
                    </a>
                </li>

                <li id="pathCurrency" class="currency_tag" style="display: none;">
                    <a href="javascript: void(0);">
                        <span class=""></span>
                        <strong></strong>
                    </a>
                </li>

                <li id="path5" class="" style="display: none;">
                    <a href="javascript: void(0);">
                        <span class="lv_1">
                            SS
                        </span>
                        <strong></strong>
                    </a>
                </li>

                <li id="path4" class="" style="display: none;">
                    <a href="javascript: void(0);">
                        <span class="lv_2">
                            SUP
                        </span>
                        <strong></strong>
                    </a>
                </li>

                <li id="path3" class="last_li" style="">
                    <a href="javascript: void(0);">
                        <span class="lv_3">
                            MA
                        </span>
                        <strong>login_username</strong>
                    </a>
                </li>

                <li id="path0" class="" style="display: none;">
                    <a href="javascript: void(0);">
                        <span class="lv_4">
                            PL
                        </span>
                        <strong></strong>
                    </a>
                </li>

                <ul class="account_pop" id="accountPop" style="">
                    <li id="popTmp" style="display: none;">
                        <a href="#"></a>
                    </li>
                </ul>
            </ul>
        </div>

        <a id="refresh" class="btn_replay"><img src="../SKYEXCHANGE - Agent_files/transparent.gif"></a>

        <a class="add_member" href="#" onclick="AddMasterDialog()"><img src="~/Content/SKYEXCHANGEAgent_files/transparent.gif" />Add Master Agent</a>
    </div>
    <div id="totalBox" class="total_box" style="">

        <dl id="creditLimitDL" class="total_dl">
            <dt>Master Balance</dt>
            <dd id="myCreditLimit" style="font-size: 12px;">USD @ViewBag.MBalance</dd>
        </dl>
        <dl id="creditGivenOutDL" class="total_dl">
            <dt>Agent Balance</dt>
            <dd id="totalCreditGivenOut" style="font-size: 12px;">USD @ViewBag.DLBalance</dd>
        </dl>
        <dl id="creditAvailBalDL" class="total_dl">
            <dt>Client Balance</dt>
            <dd id="myCreditAvailBal" style="font-size: 12px;">USD @ViewBag.MDLBalance</dd>
        </dl>
        <dl id="totalBalanceDL" class="total_dl">
            <dt>Client Exposure</dt>
            <dd id="totalBalance" style="font-size: 12px;">USD @ViewBag.MDLLib</dd>
        </dl>

        <dl id="availableBalanceDL" class="total_dl" style="display:none;">
            <dt>Total Commission</dt>
            <dd id="totalAvailBal" style="font-size: 12px;">USD @ViewBag.MDLComm</dd>
        </dl>

    </div>

    <!-- Center Column -->
    <div id="widthAll" class="width-all">


        <!-- Loading Wrap -->
        <div id="loading" class="loading-wrap" style="display: block;">
            <ul class="loading">
                <li><img src="~/Content/SKYEXCHANGEAgent_files/prospin.gif" /></li>
                <li>Loading...</li>
            </ul>
        </div>

        <!-- Message -->
        <div id="message" class="message-wrap success">
            <a class="btn-close" id="messageBtnClose">Close</a>
            <p></p>
        </div>
        <!-- Report Table -->
        <table id="resultTable" class="table01 margin-table" style="display: table;">
            <tbody>
            <thead>
            <th id="accountTh" width="" class="align-L" style="">Account</th>
            <th id="balanceTh" width="10%" style="">Balance</th>
            <th id="exposureTh" width="10%" style="">Exposure</th>
            <th id="availableBalanceTh" width="10%" style="">Avail. bal.</th>
            <th id="playerBalanceTh" width="10%" style="">Player Balance</th>
            <th id="refPLTh" width="5%" style="">P/L %</th>
            <th id="refPLTh" width="8%" style="">Total P/L</th>
            <th id="statusTh" width="10%" style="">Status</th>
            <th id="actionTh" width="15%" style="">Action</th>
            </thead>
            @foreach (var item in Model)
            {
        <tr id="0" style="display: table-row;">
            <td id="accountCol" class="align-L"><span class="lv_3">MA</span> <a href="/SuperAdmin/home_client?md_id=@item.md_Id&dist_id=@item.Client_Id">@item.Client_Username</a></td>
            <td id="balance0" style="">@item.Client_balance</td>
            <td id="currentExposure0" style=""> <a href="javascript:" style="text-decoration: none;" onclick="Exposurelistshow('/SuperAdmin/ClientLiability/0/@item.Client_Id/0'); return false;">@item.Client_exposure</a></td>
            <td id="available0" style="">@item.Client_avl_balance</td>
            <td id="available0" style="">@item.Client_ttl_balance</td>
            <td id="refPL0" style="">@item.Client_profit_loss</td>
            <td id="refPL0" style="text-align:center;">@item.DLPROF_LOSS</td>
            <td id="statusCol" style="">
                <ul id="tipsPopup" class="status-popup" style="display: none">
                </ul>
                @if (item.Client_status == "activate")
                {
                    <span id="status" class="status-active"><img src="~/Content/SKYEXCHANGEAgent_files/transparent.gif" />Active</span>
                }
                else if (item.Client_status == "delete")
                {
                    <span id="status" class="status-lock"><img src="~/Content/SKYEXCHANGEAgent_files/transparent.gif" />Locked</span>
                }
                else
                {
                    <span id="status" class="status-suspend"><img src="~/Content/SKYEXCHANGEAgent_files/transparent.gif" />Suspend</span>
                }


            </td>
            <td id="actionCol" style="">
                <ul class="action">
                    <li>
                        <a id="banking" class="bank" href="#bank" style="display: none;">Bank</a>
                    </li>
                    <li>
                        <a id="p_l0" class="p_l" href="/SuperAdmin/profitAndLoss?md_id=@item.md_Id&dist_id=@item.Client_Id&uid=0">Betting Profit &amp; Loss</a>
                    </li>
                    <li>
                        <a id="betting_history0" class="betting_history" href="/SuperAdmin/betList?md_id=@item.md_Id&dist_id=@item.Client_Id&uid=0">Betting History</a>
                    </li>
                    <li>
                        <input type="hidden" id="Username_@item.Client_Id" value="@item.Client_Username" />
                        <input type="hidden" id="status_@item.Client_Id" value="@item.Client_status" />
                        <a id="change0" class="status" href="#" onclick="openStatusDialog(@item.Client_Id)">Change Status</a>
                    </li>
                    <li>
                        <a id="profile0" class="profile" href="/SuperAdmin/accountSummary?md_id=@item.md_Id&dist_id=@item.Client_Id&uid=0">Profile</a>
                    </li>
                </ul>
            </td>
        </tr>
            }


            </tbody>
        </table>
    </div>

    <!-- Report Table -->
    <div id="tableOneBox" class="table_one_box" style="display: none">


    </div>
</div>

<script>
    function AddMasterDialog() {
        alert(Comming Soon);
    }
    function Exposurelistshow(relativeUrl, user_id) {
        var param = { 'user_id': user_id };
        OpenWindowWithPost(relativeUrl, "width=1200, height=600, left=100, top=100, resizable=yes, scrollbars=yes", "NewFile", param);
    }


    function OpenWindowWithPost(url, windowoption, name, params) {
        var form = document.createElement("form");
        form.setAttribute("method", "post");
        form.setAttribute("action", url);
        form.setAttribute("target", name);
        for (var i in params) {
            if (params.hasOwnProperty(i)) {
                var input = document.createElement('input');
                input.type = 'hidden';
                input.name = i;
                input.value = params[i];
                form.appendChild(input);
            }
        }
        document.body.appendChild(form);
        //note I am using a post.htm page since I did not want to make double request to the page
        //it might have some Page_Load call which might screw things up.
        window.open("/SuperAdmin/homedl/", name, windowoption);
        form.submit();
        document.body.removeChild(form);
    }

</script>
